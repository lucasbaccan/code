"use strict";(self.webpackChunkcode=self.webpackChunkcode||[]).push([[4862],{4708:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>t,contentTitle:()=>c,default:()=>m,frontMatter:()=>s,metadata:()=>d,toc:()=>l});var a=n(5893),r=n(1151),i=n(4985);const s={id:"index",title:"Day 1",hide_title:!1,hide_table_of_contents:!1,sidebar_label:"Day 1"},c=void 0,d={id:"pick-2024/day1/index",title:"Day 1",description:"Sum\xe1rio",source:"@site/docs/cursos/pick-2024/day1/index.md",sourceDirName:"pick-2024/day1",slug:"/pick-2024/day1/",permalink:"/cursos/pick-2024/day1/",draft:!1,unlisted:!1,editUrl:"https://github.com/lucasbaccan/code/tree/master/docs/cursos/pick-2024/day1/index.md",tags:[],version:"current",lastUpdatedBy:"Lucas Elias Baccan",lastUpdatedAt:1711933826e3,frontMatter:{id:"index",title:"Day 1",hide_title:!1,hide_table_of_contents:!1,sidebar_label:"Day 1"},sidebar:"docs",previous:{title:"Day 0",permalink:"/cursos/pick-2024/day0/"},next:{title:"Day 2",permalink:"/cursos/pick-2024/day2/"}},t={},l=[{value:"Sum\xe1rio",id:"sum\xe1rio",level:2},{value:"Dia 1",id:"dia-1",level:2},{value:"O que \xe9 container?",id:"o-que-\xe9-container",level:3},{value:"Namespaces",id:"namespaces",level:3},{value:"Cgroups",id:"cgroups",level:3},{value:"Copy on Write",id:"copy-on-write",level:3},{value:"Kernel (Docker internals)",id:"kernel-docker-internals",level:3},{value:"Instala\xe7\xe3o",id:"instala\xe7\xe3o",level:3},{value:"Criar e gerenciar containers",id:"criar-e-gerenciar-containers",level:3},{value:"Metricas e utiliza\xe7\xe3o de recursos",id:"metricas-e-utiliza\xe7\xe3o-de-recursos",level:3},{value:"Logs",id:"logs",level:3},{value:"Visualizar imagens e inspecionar containers",id:"visualizar-imagens-e-inspecionar-containers",level:3},{value:"Detached / Deattached / Daemon / Background",id:"detached--deattached--daemon--background",level:3},{value:"Baixar imagens",id:"baixar-imagens",level:3},{value:"Quiz",id:"quiz",level:3},{value:"Desafio",id:"desafio",level:2},{value:"Objetivos",id:"objetivos",level:3},{value:"Solu\xe7\xe3o",id:"solu\xe7\xe3o",level:3}];function u(e){const o={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.h2,{id:"sum\xe1rio",children:"Sum\xe1rio"}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsx)(o.li,{children:"\ud83c\udfa5 Day1 - O que iremos ver no dia de hoje? - 01:16"}),"\n",(0,a.jsx)(o.li,{children:"\ud83c\udfa5 Day1 - O que \xe9 container? - 23:20"}),"\n",(0,a.jsx)(o.li,{children:"\ud83d\udcd6 O que \xe9 containers?"}),"\n",(0,a.jsx)(o.li,{children:"\ud83d\udcd6 O que \xe9 o Docker?"}),"\n",(0,a.jsx)(o.li,{children:"\ud83c\udfa5 Day1 - Descomplicando Namespaces - 19:35"}),"\n",(0,a.jsx)(o.li,{children:"\ud83d\udcd6 Descomplicando Namespaces"}),"\n",(0,a.jsx)(o.li,{children:"\ud83c\udfa5 Day1 - Descomplicando Cgroups - 25:24"}),"\n",(0,a.jsx)(o.li,{children:"\ud83c\udfa5 Day1 - Copy-On-Write e como ele funciona - 12:04"}),"\n",(0,a.jsx)(o.li,{children:"\ud83d\udcd6 O Copy-On-Write"}),"\n",(0,a.jsx)(o.li,{children:"\ud83c\udfa5 Day1 - O Docker e sua rela\xe7\xe3o com o Kernel Linux - 03:46"}),"\n",(0,a.jsx)(o.li,{children:"\ud83d\udcd6 Docker Internals"}),"\n",(0,a.jsx)(o.li,{children:"\ud83c\udfa5 Day1 - Instalando o Docker Engine no Linux - 17:17"}),"\n",(0,a.jsx)(o.li,{children:"\ud83d\udcd6 Instalando o Docker"}),"\n",(0,a.jsx)(o.li,{children:"\ud83c\udfa5 Day1 - Criando e gerenciando os primeiros containers - 18:54"}),"\n",(0,a.jsx)(o.li,{children:"\ud83c\udfa5 Day1 - Visualizando m\xe9tricas e a utiliza\xe7\xe3o de recursos pelo containers - 13:38"}),"\n",(0,a.jsx)(o.li,{children:"\ud83c\udfa5 Day1 - Visualizando e inspecionando imagens e containers - 12:19"}),"\n",(0,a.jsx)(o.li,{children:"\ud83c\udfa5 Day1- Criando um container Dettached e o Docker exec - 19:00"}),"\n",(0,a.jsx)(o.li,{children:"\ud83d\udcd6 Criando e gerenciando nossos containers"}),"\n",(0,a.jsx)(o.li,{children:"\ud83c\udfa5 Day1 - Encerramento do dia - 02:12"}),"\n",(0,a.jsx)(o.li,{children:"\ud83d\udcdd Exame te\xf3rico do Day-1 - 7 quest\xf5es"}),"\n",(0,a.jsx)(o.li,{children:"\u231b Hora de Refletir sobre a sua resposta no Day1 - 1 quest\xf5es"}),"\n",(0,a.jsx)(o.li,{children:"\ud83c\udfa5 Day1 - Desafio pr\xe1tico do Day1 - 01:08"}),"\n",(0,a.jsx)(o.li,{children:"\ud83d\udcdd Day1 - Desafio"}),"\n",(0,a.jsx)(o.li,{children:"\u231b Seu di\xe1rio - 2 quest\xf5es"}),"\n"]}),"\n",(0,a.jsxs)(o.p,{children:[(0,a.jsx)(o.strong,{children:"Legenda"}),(0,a.jsx)(o.br,{}),"\n","\ud83c\udfa5 - Aula gravada\n\ud83d\udcd6 - Material complementar\n\ud83d\udcdd - Atividade\n\u231b - Revis\xe3o/Reflex\xe3o"]}),"\n",(0,a.jsx)(o.h2,{id:"dia-1",children:"Dia 1"}),"\n",(0,a.jsx)(o.p,{children:"No primeiro dia, come\xe7amos falando sobre Docker e containers."}),"\n",(0,a.jsx)(o.h3,{id:"o-que-\xe9-container",children:"O que \xe9 container?"}),"\n",(0,a.jsx)(o.p,{children:"Container ou LXC (Linux Containers), \xe9 uma forma de isolar os recursos para que um processo ou aplica\xe7\xe3o n\xe3o interfira em outro. \xc9 uma forma de virtualiza\xe7\xe3o, mas diferente de uma VM, o container compartilha o mesmo kernel do host, e \xe9 mais leve e r\xe1pido."}),"\n",(0,a.jsx)(o.p,{children:"Esse isolamento \xe9 feito sobre recursos como CPU, mem\xf3ria, rede, e disco, e \xe9 poss\xedvel limitar o uso de cada recurso, e at\xe9 mesmo fazer com que um container n\xe3o tenha acesso a um recurso espec\xedfico. Isso acontece tamb\xe9m para os processos, onde um container n\xe3o tem acesso a outro container, e n\xe3o tem acesso ao host."}),"\n",(0,a.jsx)(o.p,{children:"Tudo isso \xe9 feito atrav\xe9s de cgroups e namespaces, chroot, que s\xe3o funcionalidades do kernel do Linux, e que s\xe3o utilizadas para isolar os recursos e processos."}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsx)(o.li,{children:"Namespace: Isola os processos, rede, usu\xe1rios, processos, e outros recursos."}),"\n",(0,a.jsx)(o.li,{children:"Cgroups: Controla o uso de recursos como CPU, mem\xf3ria, rede, e disco."}),"\n",(0,a.jsx)(o.li,{children:"Chroot: Muda o diret\xf3rio raiz do processo, para que ele n\xe3o tenha acesso a outros diret\xf3rios."}),"\n"]}),"\n",(0,a.jsx)(o.p,{children:"O Docker n\xe3o inventou o container, mas popularizou o uso de containers, e facilitou a cria\xe7\xe3o e gerenciamento de containers, atrav\xe9s de uma API e CLI, e de um formato de imagem, que \xe9 o Dockerfile. Antes do Docker, j\xe1 existiam outras formas de criar containers, como o LXC, OpenVZ, Jails e Solaris Zones."}),"\n",(0,a.jsx)(o.p,{children:"Em seguida o Jeferson faz uma demonstra\xe7\xe3o pr\xe1tica de como que funciona o namespace, cgroups e chroot, e como que \xe9 poss\xedvel isolar um processo em um container, isso tudo sem utilizar o Docker, apenas com comandos do Linux."}),"\n",(0,a.jsx)(o.h3,{id:"namespaces",children:"Namespaces"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"apt-get update\napt-get install debootstrap -y\ndebootstrap stable /debian http://deb.debian.org/debian/\nunshare --mount --uts --ipc --net --pid --fork --user --map-root-user chroot /debian /bin/bash\nmount -t proc none /proc\nmount -t sysfs none /sys\nmount -t tmpfs none /dev\n"})}),"\n",(0,a.jsx)(o.h3,{id:"cgroups",children:"Cgroups"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"# apt-get update\napt-get install cgroup-tools -y\ncgcreate -g cpu,cpuacct,memory,blkio,devices,freezer:/giropops\nls /sys/fs/cgroup/cpu/giropops\ncgclassify -g cpu,cpuacct,memory,blkio,devices,freezer:giropops <PID>\ncat /sys/fs/cgroup/cpu/giropops/cgroup.procs\n# Vai ter o PID do processo informado anteriormente\n"})}),"\n",(0,a.jsx)(o.p,{children:"Limitar o uso de CPU"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"cat /sys/fs/cgroup/cpu/giropops/cpu.cfs_period_us\n# 100000\ncgset -r cpu.cfs_quota_us=1000 giropops\n# 1000 \xe9 1% de 100000\n# Testar com dd\ndd if=/dev/zero of=/catota.img bs=8k count 256k\n"})}),"\n",(0,a.jsx)(o.p,{children:"Limitar o uso de mem\xf3ria"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"cat /sys/fs/cgroup/memory/giropops/memory.limit_in_bytes\n# 9223372036854771712\ncgset -r memory.limit_in_bytes=100m giropops\n"})}),"\n",(0,a.jsx)(o.h3,{id:"copy-on-write",children:"Copy on Write"}),"\n",(0,a.jsx)(o.p,{children:"Agora o Jeferson explica o que \xe9 Copy on Write, que \xe9 uma t\xe9cnica utilizada para otimizar o uso de disco, e que \xe9 utilizada em containers, e em sistemas de arquivos como o ZFS e BTRFS.\nEssa t\xe9cnica faz com que um arquivo seja copiado apenas quando ele \xe9 modificado, e n\xe3o quando ele \xe9 lido, isso faz com que o uso de disco seja otimizado, e que a cria\xe7\xe3o de containers seja mais r\xe1pida."}),"\n",(0,a.jsx)(o.h3,{id:"kernel-docker-internals",children:"Kernel (Docker internals)"}),"\n",(0,a.jsx)(o.p,{children:"Muitas das funcionalidades que o Docker utiliza, s\xe3o funcionalidades do kernel do Linux, e por isso \xe9 importante manter o kernel atualizado, para ter acesso a novas funcionalidades, e corre\xe7\xf5es de seguran\xe7a. O Docker s\xf3 \xe9 uma camada de abstra\xe7\xe3o, e por baixo dele, est\xe1 o kernel do Linux, que \xe9 quem faz o trabalho pesado."}),"\n",(0,a.jsx)(i.Z,{children:(0,a.jsx)(o.p,{children:(0,a.jsx)(o.img,{alt:"Docker internals",src:n(6257).Z+"",width:"745",height:"732"})})}),"\n",(0,a.jsx)(o.h3,{id:"instala\xe7\xe3o",children:"Instala\xe7\xe3o"}),"\n",(0,a.jsx)(o.p,{children:"O Docker \xe9 um software que roda em Linux, Windows e MacOS, e \xe9 poss\xedvel instalar o Docker em cada um desses sistemas operacionais."}),"\n",(0,a.jsxs)(o.p,{children:["O site \xe9 ",(0,a.jsx)(o.a,{href:"https://docs.docker.com/get-docker/",children:"https://docs.docker.com/get-docker/"})]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"curl -fsSL https://get.docker.com | bash\n"})}),"\n",(0,a.jsx)(o.h3,{id:"criar-e-gerenciar-containers",children:"Criar e gerenciar containers"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"docker container run -it ubuntu\n"})}),"\n",(0,a.jsx)(o.p,{children:"Isso faz rodar um container do Ubuntu, e abrir um terminal interativo. Mas se voc\xea sair do terminal, o container \xe9 encerrado."}),"\n",(0,a.jsxs)(o.p,{children:["Com o container rodando, voc\xea pode sair do terminal sem encerrar o container, com ",(0,a.jsx)(o.code,{children:"Ctrl + P + Q"}),"."]}),"\n",(0,a.jsxs)(o.p,{children:["Para voltar ao terminal do container, voc\xea pode usar o comando ",(0,a.jsx)(o.code,{children:"docker container attach <ID>"}),". Para ver o ID do container, voc\xea pode usar o comando ",(0,a.jsx)(o.code,{children:"docker container ls"}),"."]}),"\n",(0,a.jsxs)(o.p,{children:["Voc\xea pode nomear um container com o comando ",(0,a.jsx)(o.code,{children:"docker container run --name <NOME> -it ubuntu"}),". Nesse caso, voc\xea pode usar o nome ao inv\xe9s do ID para gerenciar o container, ",(0,a.jsx)(o.code,{children:"docker container attach <NOME>"}),"."]}),"\n",(0,a.jsxs)(o.p,{children:["Voc\xea pode iniciar um container que foi parado com o comando ",(0,a.jsx)(o.code,{children:"docker container start <ID>"}),". E voc\xea pode parar um container com o comando ",(0,a.jsx)(o.code,{children:"docker container stop <ID>"})," ou pause com ",(0,a.jsx)(o.code,{children:"docker container pause <ID>"}),". O pouse \xe9 diferente do stop, pois o container continua rodando, mas sem consumir recursos, enquanto o stop encerra o container. Para continuar um container pausado, voc\xea pode usar o comando ",(0,a.jsx)(o.code,{children:"docker container unpause <ID>"}),". Para remover um container, voc\xea pode usar o comando ",(0,a.jsx)(o.code,{children:"docker container rm <ID>"}),"."]}),"\n",(0,a.jsxs)(o.p,{children:["Voc\xea pode apagar todos os containers parados com o comando ",(0,a.jsx)(o.code,{children:"docker container prune"}),"."]}),"\n",(0,a.jsx)(o.h3,{id:"metricas-e-utiliza\xe7\xe3o-de-recursos",children:"Metricas e utiliza\xe7\xe3o de recursos"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"docker container stats\n# ou para n\xe3o prender o terminal\ndocker container stats --no-stream\n"})}),"\n",(0,a.jsxs)(o.p,{children:["Voc\xea pode utilizar o ",(0,a.jsx)(o.code,{children:"docker container top <ID>"})," para ver os processos que est\xe3o rodando dentro do container."]}),"\n",(0,a.jsx)(o.h3,{id:"logs",children:"Logs"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"docker container logs <ID>\n# ou para ver em tempo real\ndocker container logs -f <ID>\n# ou para ver os logs das ultimas 10 linhas\ndocker container logs --tail 10 <ID>\n"})}),"\n",(0,a.jsx)(o.h3,{id:"visualizar-imagens-e-inspecionar-containers",children:"Visualizar imagens e inspecionar containers"}),"\n",(0,a.jsx)(o.p,{children:"A image \xe9 o template, e o container \xe9 a inst\xe2ncia da imagem. A imagem \xe9 somente leitura, e o container \xe9 a inst\xe2ncia que pode ser modificada."}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"docker image ls\n# ou na vers\xe3o antiga\ndocker images\n"})}),"\n",(0,a.jsxs)(o.p,{children:["Voc\xea pode inspecionar um container com o comando ",(0,a.jsx)(o.code,{children:"docker container inspect <ID>"}),". Isso mostra todas as informa\xe7\xf5es do container, como o IP, volumes, vari\xe1veis de ambiente, e outros."]}),"\n",(0,a.jsx)(o.h3,{id:"detached--deattached--daemon--background",children:"Detached / Deattached / Daemon / Background"}),"\n",(0,a.jsxs)(o.p,{children:["Voc\xea consegue rodar um container em background com o comando ",(0,a.jsx)(o.code,{children:"docker container run -d nginx"}),". Isso faz com que o container rode em background, e voc\xea pode continuar usando o terminal."]}),"\n",(0,a.jsxs)(o.p,{children:["Voc\xea pode entrar no container com o comando ",(0,a.jsx)(o.code,{children:"docker container exec -it <ID> bash"}),". Isso faz com que voc\xea entre no container, e possa rodar comandos dentro do container. Vale lembrar que o container precisa ter o bash instalado."]}),"\n",(0,a.jsx)(o.h3,{id:"baixar-imagens",children:"Baixar imagens"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"docker image pull nginx\n# ou\ndocker pull nginx\n"})}),"\n",(0,a.jsx)(o.h3,{id:"quiz",children:"Quiz"}),"\n",(0,a.jsx)(o.p,{children:"Com o final da aula, tem um quiz para testar o conhecimento adquirido."}),"\n",(0,a.jsx)(o.h2,{id:"desafio",children:"Desafio"}),"\n",(0,a.jsx)(o.p,{children:'O desafio \xe9 feito dentro da plataforma "Instruqt". Ao clicar no link do desafio, j\xe1 aparece a p\xe1gina para a atividade.'}),"\n",(0,a.jsx)(o.h3,{id:"objetivos",children:"Objetivos"}),"\n",(0,a.jsxs)(o.ol,{children:["\n",(0,a.jsx)(o.li,{children:"Instalando o Docker no Linux"}),"\n"]}),"\n",(0,a.jsx)(o.p,{children:"Voc\xea precisa instalar o Docker no servidor Linux da LINUXtips!\nQuando finalizar, clica em Check ."}),"\n",(0,a.jsxs)(o.ol,{start:"2",children:["\n",(0,a.jsx)(o.li,{children:"Executando o nosso primeiro container!"}),"\n"]}),"\n",(0,a.jsx)(o.p,{children:"Sem nenhum segredo, apenas coloque o Nginx para rodar! Lembre-se, ele deve rodar na porta 80 do container e do Servidor da LINUXtips."}),"\n",(0,a.jsx)(o.p,{children:"Voc\xea tem duas abas, uma do Terminal Linux e outra com o Navegador!"}),"\n",(0,a.jsx)(o.p,{children:"Quando finalizar, clica em Check ."}),"\n",(0,a.jsx)(o.h3,{id:"solu\xe7\xe3o",children:"Solu\xe7\xe3o"}),"\n",(0,a.jsxs)(o.ol,{children:["\n",(0,a.jsx)(o.li,{children:"Instalando o Docker no Linux"}),"\n"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"curl -fsSL https://get.docker.com | bash\ndocker container run -it ubuntu\n"})}),"\n",(0,a.jsxs)(o.ol,{start:"2",children:["\n",(0,a.jsx)(o.li,{children:"Executando o nosso primeiro container!"}),"\n"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"docker container run -d -p 80:80 nginx\n"})})]})}function m(e={}){const{wrapper:o}={...(0,r.a)(),...e.components};return o?(0,a.jsx)(o,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},4985:(e,o,n)=>{n.d(o,{Z:()=>r});n(7294);var a=n(5893);function r(e){let{children:o,fontSize:n="15px",color:r="#999"}=e;return(0,a.jsx)("div",{style:{textAlign:"center",fontSize:n,color:r},children:o})}},6257:(e,o,n)=>{n.d(o,{Z:()=>a});const a=n.p+"assets/images/img-docker-internal-a0de8d821ce20dea99346933204e3a38.png"},1151:(e,o,n)=>{n.d(o,{Z:()=>c,a:()=>s});var a=n(7294);const r={},i=a.createContext(r);function s(e){const o=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function c(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(i.Provider,{value:o},e.children)}}}]);